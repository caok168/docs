# go语言缓存穿透、缓存击穿、缓存雪崩区别和解决方案

### 缓存穿透
缓存穿透，是指缓存和数据库中都没有的数据。

**解决方案：**
* 1.接口层增加校验，如用户鉴权校验，id做基础校验，id<=0的直接拦截；
* 2.从缓存取不到的数据，在数据库中也没有取到，这时也可以将key-value对写为key-null，缓存有效时间可以设置短点。这样可以防止攻击用户反复用同一个id暴力攻击

### 缓存雪崩
和缓存击穿不同的是，缓存击穿指并发查询同一条数据，缓存雪崩是不同数据都过期了，很多数据都查不到从而查数据库。

**解决方案**
* 缓存数据的过期时间设置随机，防止同一时间大量数据过期现象发生。
* 如果缓存数据库是分布式部署，将热点数据均匀分布在不同缓存数据库中。
* 设置热点数据永不过期。

### 缓存击穿
缓存击穿是指缓存中没有但数据库中有的数据（一般是缓存时间到期），这是由于并发用户特别多，同时读缓存没有读到数据，又同时去数据库取数据，引起数据库压力瞬间增大，造成过大压力。

**解决方案**
* 设置热点数据永远不过期
* 加互斥锁
    - golang里面有一个singlefight类


参考连接：
https://blog.csdn.net/weixin_42544051/article/details/106562845

